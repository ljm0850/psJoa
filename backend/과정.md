# 가상환경 및 세팅
- `python3 -m venv venv` : 가상환경 생성
- `source venv/bin/activate` : 가상환경 활성화
- `pip install django` : Django 설치
- `django-admin startproject psJoa` : 프로젝트 생성
- `python manage.py runserver` : 개발 서버 시작
- `python manage.py startapp accounts` : local app 생성
- `/psJoa/settings.py` : INSTALLED_APPS에 local app 추가
- `/accounts/models.py` : 모델 정의, accounts외에도 정의
- `/psJoa/settings.py` : 유저 커스텀 모델 사용 입력 (AUTH_USER_MODEL = 'accounts.CustomUser'), CustomUser사용하기 위해
- `/accounts/admin.py` : admin에 등록, Django 기본 admin을 사용 안할것 같아서 필요는 없을듯
- `python manage.py makemigrations` : 마이그레이션 파일 만들기, sqlite3 파일이 만들어 지네, mySQL 사용하고 싶은데
    - `pip install mysqlclient` : mySQL과 통신할 라이브러리
    - `pip install python-decouple` : db 정보 암호화용 (config('DB_USER')) 라이브러리 설치

- `python manage.py migrate` : 마이그레이션

- `pip install djangorestframework` : REST API 라이브러리
    - settings.py의 INSTALLED_APPS에 'rest_framework', rest_framework.authtoken' 추가
- `pip install dj-rest-auth django-allauth` : 로그인 관련 라이브러리
    - settings.py의 INSTALLED_APPS에 'allauth','allauth.account','allauth.socialaccount','dj_rest_auth','dj_rest_auth.registration',
- `pip install django-cors-headers`: 다른 도메인에서 접근 관리용 라이브러리
    - settings.py의 INSTALLED_APPS에 'corsheaders' 추가

# 문제 
## mySQL 연결
- mySQL 설치 및 초기화, 시작
```
brew install mysql
mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp
brew services start mysql 혹은 mysql.server start
```
- `mysql_secure_installation` : mySQL초기 설정
- `mysql -u root -p` : mySQL 접속
- 데이터베이스와 사용자 설정 (예시)
```
CREATE DATABASE your_database_name CHARACTER SET UTF8MB4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'your_username'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON your_database_name.* TO 'your_username'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```
- `pip install mysqlclient` : mySQL과 통신할 라이브러리
    - 문제발생 => 의존성 설치
    ```
    brew install mysql
    brew install openssl
    brew install pkg-config
    brew link --force openssl
    ```
    - 환경변수 설정
    ```
    export LDFLAGS="-L/usr/local/opt/openssl/lib"
    export CPPFLAGS="-I/usr/local/opt/openssl/include"
    export PATH="/usr/local/opt/openssl/bin:$PATH"
    ```
- settings.py 설정 (아래는 예시)
```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'db이름',
        'USER': 'db로그인 유저',
        'PASSWORD': '비번',
        'HOST': 'localhost',
        'PORT': '3306',
    }
}
```
- 이후 마이그레이션

## SETTINS.PY 암호화
- `pip install python-decouple` : 라이브러리 설치
- `.env` : 파일 생성 후 값 입력, `DB_NAME=db이름` 형식
- settings.py 변경
```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': config('DB_NAME', default='your_database_name!!!!'),
        'USER': config('DB_USER'),
        'PASSWORD': config('DB_PASSWORD'),
        'HOST': config('DB_HOST'),
        'PORT': config('DB_PORT', cast=int),
    }
}
```
## 회원 가입시 nickname의 not null이 적용 안됨
